<section>
    <header>
        <h1>Ağaç ve Markov Zincirleri</h1>
    </header>

    <article>
        <p>
            Bu bölüm, <a href="https://github.com/TolgaOKurt/Ugraslar/blob/main/PreSept25/Agac.c"
                target="_blank">Agac.c</a> dosyasında temelini attığım "Markov zinciri?" incelemelerini, ağaç yollarını
            ve
            ilgili matematiksel eşitlikleri konu almaktadır.
        </p>

        <h3>Temel Kavramlar</h3>
        <p>
            Durumlar, pozisyonlar veya noktalar... İsimlendirme ne olursa olsun, temel soru şudur: <strong>Bir noktadan
                diğerine geçiş ihtimali nedir?</strong> Rastgele hareket eden bir oyuncunun (random walker) akıbeti ne
            olacaktır? Sonsuz döngülerde mi sıkışacak, yoksa bir sonuca mı ulaşacaktır?
        </p>

        <p>Analiz ortamımızı şu üç temel nokta türü üzerine kuralım:</p>
        <ul>
            <li><strong>Başlangıç Noktası:</strong> Analizin başladığı, kesinlikle (olasılık = 1) bulunduğumuz noktadır.
                İlerleyen adımlarda tekrar bu noktaya dönülmesi mümkün olabilir.</li>
            <li><strong>Zafer Noktası:</strong> Hedefe ulaşılan noktadır. Yolculuk burada sona erer ve 1 puan kazanılır.
            </li>
            <li><strong>Mağlubiyet Noktası:</strong> Kaybedilen noktadır. Yolculuk burada sona erer ve 0 puan kazanılır.
            </li>
        </ul>

        <p>
            Önce durumu anlamak için basit ortamları analiz edecek, ardından genel formüller oluşturmaya çalışacağız.
        </p>

        <h3>Basit Ortam Analizi</h3>
        <figure>
            <img src="images/AgacBasitbirornek01.png" alt="Basit Ağaç Örneği" style="max-width: 100%; height: auto;">
            <figcaption><a href="images/AgacBasitbirornek01.png" download>Basit Örneği İndir</a></figcaption>
        </figure>

        <p>
            Bu basit örnekte durum açıktır: Yukarı giden kazanır, aşağı giden kaybeder. Başlangıçtan başlar ve uç
            noktalarda biter. Ağaç ikili (binary) yapıda büyüse de, farklı sayıda kollara ayrılsa da sonuçlar aşikardır.
        </p>

        <div class="note">
            <strong>Önemli Gözlemler:</strong>
            <ol>
                <li><strong>Bulunma Oranı (BO):</strong> Başlangıçta 1'dir. Gidilen yön sayısına (bu örnekte 2)
                    bölünerek dağılır ve gidilen yöne eklenir.</li>
                <li><strong>Kazanma Oranı (KO):</strong> Zafer (1) ve Mağlubiyet (0) noktalarından doğar, geriye doğru
                    beslenir. Katsayısı, gittiği noktanın çocuk sayısına bölünerek bulunur.</li>
            </ol>
        </div>

        <figure>
            <img src="images/AgacBasitbirornek02.png" alt="İkinci Basit Örnek" style="max-width: 100%; height: auto;">
            <figcaption><a href="images/AgacBasitbirornek02.png" download>2. Basit Örneği İndir</a></figcaption>
        </figure>

        <p>Bu şekilde oluşacak tüm ağaçların akışını takip edebiliriz. Ancak konunun asıl zorluğu ve derinliği, basit
            dallanmalarda değil, döngülerde yatmaktadır.</p>

        <h3>Döngüsel Durumlar (Loops)</h3>
        <p>
            Ya yollardan biri, bizi daha önce geçtiğimiz bir noktaya geri götürürse?
        </p>
        <p>
            Döngü durumlarında <strong>Kazanma Oranı (KO)</strong> ve <strong>Bulunma Miktarı (BM)</strong> hesaplamak
            için her nokta için denklemler kurmamız gerekir:
        </p>
        <ul>
            <li><strong>BM (Bulunma Miktarı) =</strong> $\sum$ (Gelen noktaların BM'si × Geldiği noktanın çocuk
                miktarına bölümü)</li>
            <li><strong>KO (Kazanma Oranı) =</strong> $\sum$ (Gittiği noktaların KO'su / Kendi çocuk miktarı)</li>
        </ul>
        <p>
            <em>Not: Başlangıç noktasının BM'sine özel olarak +1 eklenir. Artık "bulunma oranı" değil "bulunma miktarı"
                kavramını kullanırız, çünkü döngüler nedeniyle bir noktada bulunma beklentisi %100'ü (1.0) aşabilir.
                Örneğin ortalama 2 kere bulunma gibi.</em>
        </p>

        <figure>
            <img src="images/Agacornekdongu01.png" alt="Döngü Örneği" style="max-width: 100%; height: auto;">
            <figcaption><a href="images/Agacornekdongu01.png" download>1. Döngü Örneği İndir</a></figcaption>
        </figure>

        <h4>Hesaplama Örneği</h4>
        <p>
            Başlangıç noktasına $b$, diğer noktaya $a$ diyelim. $a$, $b$'den %50 ihtimalle gelinen bir noktadır.
            <br>
            $b = 1 + (a/2)$
            <br>
            $a = b/2$
        </p>
        <p>
            Denklemleri çözürsek:
            <br>
            $1 + a/2 = 2a \Rightarrow 2 + a = 4a \Rightarrow 3a = 2 \Rightarrow a = 2/3$
            <br>
            Böylece $b = 4/3$ bulunur.
        </p>
        <p>
            Kazanma Oranı (KO) hesabı için:
            <br>
            $BaşKO = AKO/2$
            <br>
            $AKO = 0.5 + BaşKO/2$
            <br>
            Yerine koyarsak: $BaşKO = (0.5 + BaşKO/2) / 2 \Rightarrow 4 \times BaşKO = 1 + BaşKO$
            <br>
            Sonuç: $BaşKO = 1/3$ ve $AKO = 1/2 + 1/6 = 2/3$
        </p>

        <p>
            Burada döngü, sonsuza giden bir geometrik dizi toplamı (sigma) gibi davranır: $\sum a \cdot r^i$.
        </p>

        <figure>
            <img src="images/Agacornekdongu02.png" alt="Açık Döngü (Hesaplanmış) Örneği"
                style="max-width: 100%; height: auto;">
            <figcaption><a href="images/Agacornekdongu02.png" download>1. Döngü (Hesaplanmış) Örneği İndir</a>
            </figcaption>
        </figure>

        <h3>Matematiksel Açıklama</h3>
        <p>
            Başlangıç noktasının (BaşKO) $1/3$ olmasının sebebini açıklayalım. Bulunma miktarını hesaplarken git-gel
            değeri $(1/2 \times 1/2) = 1/4$'tür. Bu döngü sonsuz kez tekrarlanabilir.
        </p>
        <p>
            Toplam = $1 + 1/4 + 1/16 + \dots = \sum_{n=0}^{\infty} (1/4)^n$
        </p>
        <p>
            Sonsuz geometrik dizi toplam formülü $\frac{1}{1-r}$ kullanılarak: $\frac{1}{1 - 1/4} = \frac{1}{3/4} = 4/3$
            bulunur.
        </p>
        <p>
            Kazanma oranını da $a$ merkezli hesaplarsak:
            <br>
            $1/2$ direkt kazanış, $1/4$ geri dönüş.
            <br>
            $(1/2) \times (1 + 1/4 + \dots) = (1/2) \times (4/3) = 2/3$.
        </p>

        <h3>Özet Formüller ve Tanımlar</h3>
        <p>Bulmuş olduğum formülleri ve tanımları aşağıda listeliyorum:</p>

        <dl>
            <dt>Kazanma Oranı (KO)</dt>
            <dd>Toplam(Gitme İhtimali × Gidilen Noktanın Kazanma Oranı)</dd>

            <dt>Bulunma Miktarı (BM)</dt>
            <dd>Toplam(Gelme İhtimali × Gelen Noktanın Bulunma Miktarı)</dd>
            <dd>Alternatif: En az bir kere bulunma ihtimali × Kendine gelme miktarı</dd>

            <dt>Kendine Gelme Miktarı (KGM)</dt>
            <dd>$\frac{1}{1 - \text{Kendine En Az Bir Kere Gelme İhtimali}}$</dd>
            <dd>Alternatif: Bulunma Miktarı / En Az Bir Kere Bulunma İhtimali</dd>

            <dt>Sadece N Kere Gelme İhtimali</dt>
            <dd>En Az Bir Kere Bulunma İhtimali × $(1 - \text{Kendine Gelme Miktarı}) \times
                \text{Kendine Gelme Miktarı}^{n-1}$</dd>
        </dl>

        <p>
            <strong>Not:</strong> Kazanma oranları ve kendine gelme oranları, başlangıç noktasından bağımsız olarak
            haritanın yapısı ile alakalıdır. Bulunma miktarları ise başlangıç noktasına bağımlıdır.
        </p>

        <p>
            Bu konu üzerine alt-ağaç analizleri ve farklı ağaç türleri üzerine çalışmalarım bulunmakta, ancak temel
            mantık yukarıdaki gibidir.
        </p>

        <h3>Kısaltmalar</h3>
        <ul>
            <li><strong>KO:</strong> Kazanma Oranı</li>
            <li><strong>BM:</strong> Bulunma Miktarı</li>
            <li><strong>Ea1KBO:</strong> En Az Bir Kere Bulunma Oranı</li>
            <li><strong>K1GO:</strong> Kendine Bir Kere Gelme Oranı</li>
            <li><strong>KGM:</strong> Kendine Gelme Miktarı</li>
            <li><strong>SBKBO:</strong> Sadece Bir Kere Bulunma Oranı</li>
        </ul>

        <h3>Ek Görseller</h3>
        <figure>
            <img src="images/AgacOrnek1.png" alt="Karmaşık Ağaç Örneği" style="max-width: 100%; height: auto;">
            <figcaption><a href="images/AgacOrnek1.png" download>Örneği İndir</a> - Kaybetme yolunun geniş olduğu bir
                örnek.
            </figcaption>
        </figure>
        <h2>Yapılabilecekler</h2>
        <p>
            Markov zincirlerini araştırmak.<br>
            Bu yazıyı okuyan biri varsa sevgilerle... 04.12.25
        </p>

        <div class="gallery"
            style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; margin-top: 20px;">
            <figure>
                <img src="images/agacChatGPT.png" alt="ChatGPT Görseli" style="max-width: 300px; height: auto;">
                <figcaption><a href="images/agacChatGPT.png" download>ChatGPT Görseli İndir</a></figcaption>
            </figure>
            <figure>
                <img src="images/agacGemini.png" alt="Gemini Görseli" style="max-width: 300px; height: auto;">
                <figcaption><a href="images/agacGemini.png" download>Gemini Görseli İndir</a></figcaption>
            </figure>
            <figure>
                <img src="images/agaczimage.jpeg" alt="Z-Image Görseli" style="max-width: 300px; height: auto;">
                <figcaption><a href="images/agaczimage.jpeg" download>Z-Image Görseli İndir</a></figcaption>
            </figure>
        </div>
    </article>

</section>